# RabbitMQ Secrets - TEMPLATE (DO NOT COMMIT REAL VALUES)
# Use Sealed Secrets in GitOps workflow
# Created: 2024-12-26

# Instructions:
# 1. Copy this file to rabbitmq-secrets.yaml (gitignored)
# 2. Replace placeholders with real values
# 3. Base64 encode: echo -n "password" | base64
# 4. Create sealed secret: kubeseal < rabbitmq-secrets.yaml > rabbitmq-secrets-sealed.yaml
# 5. Commit rabbitmq-secrets-sealed.yaml to git

---
# RabbitMQ Credentials
apiVersion: v1
kind: Secret
metadata:
  name: rabbitmq-credentials
  namespace: staging
  labels:
    app: rabbitmq
    environment: staging
type: Opaque
data:
  # Replace with actual base64-encoded values
  admin-username: YWRtaW4=  # "admin" (example)
  admin-password: Y2hhbmdlbWU=  # "changeme" (REPLACE THIS!)
  app-username: cm9ic29uLWFwcA==  # "robson-app"
  app-password: Y2hhbmdlbWU=  # "changeme" (REPLACE THIS!)
  erlang-cookie: cmFuZG9tLWNvb2tpZS1oZXJl  # Random 32-char string

---
# BasicAuth Credentials for Management UI
apiVersion: v1
kind: Secret
metadata:
  name: rabbitmq-basicauth-secret
  namespace: staging
  labels:
    app: rabbitmq
    environment: staging
type: Opaque
data:
  # users file format: username:bcrypt-hash
  # Generate: htpasswd -nBC 10 admin
  # Example: admin:$2y$10$...
  users: YWRtaW46JDJ5JDEwJC4uLg==  # REPLACE with real bcrypt hash

# To generate bcrypt hash:
# docker run --rm httpd:2.4-alpine htpasswd -nbBC 10 admin <password>
# Then base64 encode the output:
# echo -n "admin:$2y$10$..." | base64
